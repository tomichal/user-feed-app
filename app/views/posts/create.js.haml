- new_post = Post.new
- post = @post.errors.any? ? @post : new_post
- form_html = escape_javascript(render("posts/form", post: post)).html_safe
$('form##{dom_id(new_post)}').replaceWith('#{form_html}');

- unless @post.errors.any?
  - post_html = escape_javascript(render("posts/post", post: @post)).html_safe
  - alerts_html = escape_javascript(render("shared/alerts")).html_safe
  $('.#{dom_class(Post)}').prepend('#{post_html}');
  $('.alerts').replaceWith('#{alerts_html}');

